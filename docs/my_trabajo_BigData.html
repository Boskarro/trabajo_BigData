<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Juan Bosco Pujol">

<title>🦈 (Clica aquí) - Ataques de tiburón a lo largo de la historia.</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./imagenes/sharkfavi.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": true,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<script src="site_libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.2/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="my_styles.css">
<link rel="stylesheet" href="./assets/my_css_file.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">🦈 (Clica aquí)</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Buscar"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Navegación de palanca" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./my_trabajo_BigData.html" rel="" target="" aria-current="page">
 <span class="menu-text">Trabajo individual</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Boskarro" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="mailto:pucer@alumni.uv.es" rel="" target=""><i class="bi bi-envelope" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-page-left">
      <div class="quarto-title-block"><div><h1 class="title">Ataques de tiburón a lo largo de la historia.</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Mostrar todo el código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Ocultar todo el código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver el código fuente</a></li></ul></div></div>
                                <div class="quarto-categories">
                <div class="quarto-category">trabajo BigData</div>
                <div class="quarto-category">selección natural</div>
              </div>
                  </div>
  </div>
    
  <div class="quarto-title-meta-author">
    <div class="quarto-title-meta-heading">Autor/a</div>
    <div class="quarto-title-meta-heading">Afiliación</div>
    
      <div class="quarto-title-meta-contents">
      <p class="author">Juan Bosco Pujol </p>
    </div>
      <div class="quarto-title-meta-contents">
          <p class="affiliation">
              <a href="https://www.uv.es">
              Universitat de València
              </a>
            </p>
        </div>
      </div>

  <div class="quarto-title-meta">

        
      <div>
      <div class="quarto-title-meta-heading">Fecha de publicación</div>
      <div class="quarto-title-meta-contents">
        <p class="date">3 de enero de 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Índice</h2>
   
  <ul>
  <li><a href="#introducción" id="toc-introducción" class="nav-link active" data-scroll-target="#introducción">Introducción</a></li>
  <li><a href="#recuento-de-ataques-de-tiburones-a-humanos." id="toc-recuento-de-ataques-de-tiburones-a-humanos." class="nav-link" data-scroll-target="#recuento-de-ataques-de-tiburones-a-humanos.">1: Recuento de ataques de tiburones a humanos.</a></li>
  <li><a href="#las-actividades-más-propensas-a-sufrir-ataques." id="toc-las-actividades-más-propensas-a-sufrir-ataques." class="nav-link" data-scroll-target="#las-actividades-más-propensas-a-sufrir-ataques.">2: Las actividades más propensas a sufrir ataques.</a></li>
  <li><a href="#mapamundi-de-ataques-en-2022-zonas-con-más-registros." id="toc-mapamundi-de-ataques-en-2022-zonas-con-más-registros." class="nav-link" data-scroll-target="#mapamundi-de-ataques-en-2022-zonas-con-más-registros.">3: Mapamundi de ataques en 2022, zonas con más registros.</a></li>
  <li><a href="#conclusión" id="toc-conclusión" class="nav-link" data-scroll-target="#conclusión">4: CONCLUSIÓN</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block column-page-left" id="quarto-document-content">




<section id="introducción" class="level1">
<h1>Introducción</h1>
<p>El tiburón es un animal fascinante, un depredador perfeccionado a través de millones de años de evolución (es más antiguo que los árboles) que tenemos la suerte de poder observar y analizar en nuestros tiempos. Sin embargo, en la mayoría de personas sienten miedo y rechazo hacia este. Si bien es cierto que estos animales pueden ser peligrosos debido a su fuerza de mordida y afilados dientes, no representan una amenaza real para nosotros los humanos. La cruda realidad es bien opuesta, pues es el ser humano la real amenaza para el tiburón.</p>
<p>Procederé a exponer una serie de datos que he obtenido de un archivo mejorado del archivo global de ataques de tiburón elaborado por el <a href="https://www.sharkattackfile.net/index.htm"><em>Shark Research Institute</em></a></p>
</section>
<section id="recuento-de-ataques-de-tiburones-a-humanos." class="level1">
<h1>1: Recuento de ataques de tiburones a humanos.</h1>
<blockquote class="blockquote">
<h2 id="en-primer-lugar-vamos-a-observar-la-cantidad-de-ataques-de-tiburón-que-se-han-registrado-en-el-archivo-global" class="anchored" data-anchor-id="recuento-de-ataques-de-tiburones-a-humanos.">En primer lugar, vamos a observar la cantidad de ataques de tiburón que se han registrado en el archivo global:</h2>
</blockquote>
<div class="cell" data-layout-align="center">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">#CARGADO DE DATOS</span></span>
<span id="cb1-7"><a href="#cb1-7"></a></span>
<span id="cb1-8"><a href="#cb1-8"></a>datos <span class="ot">&lt;-</span> <span class="st">"./datos/sharkie.csv"</span></span>
<span id="cb1-9"><a href="#cb1-9"></a></span>
<span id="cb1-10"><a href="#cb1-10"></a>sharks <span class="ot">&lt;-</span>rio<span class="sc">::</span><span class="fu">import</span>(datos)</span>
<span id="cb1-11"><a href="#cb1-11"></a></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="co">#me ventilo los NA</span></span>
<span id="cb1-13"><a href="#cb1-13"></a></span>
<span id="cb1-14"><a href="#cb1-14"></a>sharks_limpio <span class="ot">&lt;-</span> sharks<span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb1-15"><a href="#cb1-15"></a></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="co">#Voy a seleccionar las variables que me interesan para realizar el trabajo, generando el DF general que usaré:</span></span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a>DF_TIBURONE <span class="ot">&lt;-</span> sharks_limpio <span class="sc">%&gt;%</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>  <span class="fu">select</span>(Year, Type, Country, Activity, Sex, Age,<span class="st">`</span><span class="at">Fatal (Y/N)</span><span class="st">`</span>, Species)</span>
<span id="cb1-20"><a href="#cb1-20"></a></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="co">#GRAFICO CON NUMERO DE ATAQUES TOTAL POR AÑO</span></span>
<span id="cb1-22"><a href="#cb1-22"></a></span>
<span id="cb1-23"><a href="#cb1-23"></a>Ataques_por_año <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb1-24"><a href="#cb1-24"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>  <span class="fu">summarize</span>(<span class="at">Num_Attacks =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb1-26"><a href="#cb1-26"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb1-27"><a href="#cb1-27"></a>  <span class="fu">mutate</span>(<span class="at">Total_acumulado =</span> <span class="fu">cumsum</span>(Num_Attacks))</span>
<span id="cb1-28"><a href="#cb1-28"></a></span>
<span id="cb1-29"><a href="#cb1-29"></a>G1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Ataques_por_año,</span>
<span id="cb1-30"><a href="#cb1-30"></a>       <span class="fu">aes</span>(</span>
<span id="cb1-31"><a href="#cb1-31"></a>         Year, </span>
<span id="cb1-32"><a href="#cb1-32"></a>         Num_Attacks)) <span class="sc">+</span></span>
<span id="cb1-33"><a href="#cb1-33"></a>       <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.90</span>,</span>
<span id="cb1-34"><a href="#cb1-34"></a>                 <span class="at">color =</span> <span class="st">"#BD1D00"</span>) <span class="sc">+</span></span>
<span id="cb1-35"><a href="#cb1-35"></a>  <span class="fu">labs</span>(</span>
<span id="cb1-36"><a href="#cb1-36"></a>    <span class="at">title =</span> <span class="st">"Número de ataques de tiburón por año."</span>,</span>
<span id="cb1-37"><a href="#cb1-37"></a>    <span class="at">subtitle =</span> <span class="st">"Serie 1555-2022"</span>,</span>
<span id="cb1-38"><a href="#cb1-38"></a>    <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb1-39"><a href="#cb1-39"></a>    <span class="at">y =</span> <span class="st">"Número de ataques"</span></span>
<span id="cb1-40"><a href="#cb1-40"></a>  ) <span class="sc">+</span></span>
<span id="cb1-41"><a href="#cb1-41"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span> </span>
<span id="cb1-42"><a href="#cb1-42"></a>  <span class="fu">transition_reveal</span>(Year) <span class="sc">+</span></span>
<span id="cb1-43"><a href="#cb1-43"></a>  <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-44"><a href="#cb1-44"></a></span>
<span id="cb1-45"><a href="#cb1-45"></a><span class="fu">animate</span>(G1, <span class="at">nframes =</span> <span class="dv">244</span>, <span class="at">fps =</span> <span class="dv">20</span>)</span>
<span id="cb1-46"><a href="#cb1-46"></a></span>
<span id="cb1-47"><a href="#cb1-47"></a>G2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Ataques_por_año, </span>
<span id="cb1-48"><a href="#cb1-48"></a>             <span class="fu">aes</span>(</span>
<span id="cb1-49"><a href="#cb1-49"></a>               Year,</span>
<span id="cb1-50"><a href="#cb1-50"></a>               Total_acumulado)) <span class="sc">+</span></span>
<span id="cb1-51"><a href="#cb1-51"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.9</span>,</span>
<span id="cb1-52"><a href="#cb1-52"></a>            <span class="at">color =</span> <span class="st">"#BD1D00"</span> ) <span class="sc">+</span></span>
<span id="cb1-53"><a href="#cb1-53"></a>  <span class="fu">labs</span>(</span>
<span id="cb1-54"><a href="#cb1-54"></a>    <span class="at">title =</span> <span class="st">"Total de ataques de tiburón"</span>,</span>
<span id="cb1-55"><a href="#cb1-55"></a>    <span class="at">subtitle =</span> <span class="st">"Serie acumulada 1555-2022"</span>,</span>
<span id="cb1-56"><a href="#cb1-56"></a>    <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb1-57"><a href="#cb1-57"></a>    <span class="at">y =</span> <span class="st">"Número de ataques"</span></span>
<span id="cb1-58"><a href="#cb1-58"></a>  ) <span class="sc">+</span> </span>
<span id="cb1-59"><a href="#cb1-59"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb1-60"><a href="#cb1-60"></a>  <span class="fu">transition_reveal</span>(Year) <span class="sc">+</span></span>
<span id="cb1-61"><a href="#cb1-61"></a>  <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb1-62"><a href="#cb1-62"></a></span>
<span id="cb1-63"><a href="#cb1-63"></a><span class="fu">animate</span>(G2, <span class="at">nframes =</span> <span class="dv">244</span>, <span class="at">fps =</span> <span class="dv">20</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-1-1.gif" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-1-2.gif" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>A simple vista podemos ver que la cantidad de ataques tanto acumulada como por año ha ido en aumento a lo largo de la historia. Esto no es de sorpresa para nadie ya que se ha producido un constante aumento de la población humana y con ella un aumento respecto al número de actividades que se realizan en el mar (pesca, ocio, viajes en barco…) por lo que es lógico que los ataques de tiburón hayan aumentado. Sin embargo, las cantidades de ataques registrados son ridículamente pequeñas teniendo en cuenta la enorme cantidad de seres humanos que habitamos el planeta. Es más, existen otras especies animales que se cobran una mayor cantidad de vidas humanas que los tiburones:</p>
<table class="table">
<thead>
<tr class="header">
<th>Animal</th>
<th>Kills por año</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Mosquitos</td>
<td>750000</td>
</tr>
<tr class="even">
<td>Serpientes</td>
<td>100000</td>
</tr>
<tr class="odd">
<td>Perros</td>
<td>Entre 25 y 35 mil</td>
</tr>
<tr class="even">
<td>Caracoles de agua dulce</td>
<td>Entre 10 y 20 mil</td>
</tr>
</tbody>
</table>
<p>Veamos qué especies de tiburón son las que más ataques a personas tienen registrados según nuestros datos:</p>
<div class="cell" data-layout-align="center">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a></span>
<span id="cb2-2"><a href="#cb2-2"></a>Especies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"White shark"</span>, <span class="st">"Grey reef shark"</span>, <span class="st">"Tiger shark"</span>, <span class="st">"Wobbegong shark"</span>, <span class="st">"Blacktip shark"</span>, <span class="st">"Sandtiger shark"</span>, <span class="st">"Reef shark"</span>, <span class="st">"Bull shark"</span>, <span class="st">"Blacktip reef shark"</span>, <span class="st">"Whitetip reef shark"</span>, <span class="st">"Lemon shark"</span>, <span class="st">"Porbeagle shark"</span>, <span class="st">"Nurse shark"</span>, <span class="st">"Bronze whaler shark"</span>, <span class="st">"Raggedtooth shark"</span>, <span class="st">"Mako shark"</span>, <span class="st">"Hammerhead shark"</span>, <span class="st">"Whaler shark"</span>, <span class="st">"Copper shark"</span>, <span class="st">"Galapagos shark"</span>, <span class="st">"Cookiecutter shark"</span>, <span class="st">"Broadnose sevengil shark"</span>, <span class="st">"Spinner shark"</span>, <span class="st">"Blue shark"</span>, <span class="st">"Carpet shark"</span>, <span class="st">"Basking shark"</span>, <span class="st">"Salmon shark"</span>, <span class="st">"Zambesi shark"</span>,<span class="st">"shark"</span>)</span>
<span id="cb2-3"><a href="#cb2-3"></a></span>
<span id="cb2-4"><a href="#cb2-4"></a>Ataques_por_especie <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6"></a>  <span class="fu">summarize</span>(<span class="at">Num_Attacks =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Num_Attacks),</span>
<span id="cb2-8"><a href="#cb2-8"></a>         <span class="at">Especie =</span> <span class="fu">gsub</span>(<span class="st">"^</span><span class="sc">\\</span><span class="st">+?[</span><span class="sc">\\</span><span class="st">.+0-9]+'?[ ]?|[</span><span class="sc">\\</span><span class="st">.+0-9]+[ ]?(m|cm)[ ]?to [</span><span class="sc">\\</span><span class="st">.+0-9]+[ ]?(m|cm)[ ]?</span><span class="sc">\\</span><span class="st">[([</span><span class="sc">\\</span><span class="st">.+0-9]+)'? to ([</span><span class="sc">\\</span><span class="st">.+0-9]+)'?</span><span class="sc">\\</span><span class="st">][ ]?|[ ]?metre|[</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">]][ ]?|</span><span class="sc">\\</span><span class="st">d+[ ]?[-–][ ]?</span><span class="sc">\\</span><span class="st">[?</span><span class="sc">\\</span><span class="st">d+[ ]?(kg|lb)</span><span class="sc">\\</span><span class="st">]?[ ]?dead|,.*|[ ]?metre|[ ]?(m|cm)|</span><span class="sc">\\</span><span class="st">[.*</span><span class="sc">\\</span><span class="st">]|[;].*"</span>, <span class="st">""</span>, Species))</span>
<span id="cb2-9"><a href="#cb2-9"></a></span>
<span id="cb2-10"><a href="#cb2-10"></a></span>
<span id="cb2-11"><a href="#cb2-11"></a>Ataques_interes <span class="ot">&lt;-</span> Ataques_por_especie <span class="sc">%&gt;%</span></span>
<span id="cb2-12"><a href="#cb2-12"></a>  <span class="fu">select</span>(Especie, Num_Attacks, Total) <span class="sc">%&gt;%</span></span>
<span id="cb2-13"><a href="#cb2-13"></a>  <span class="fu">filter</span>(Especie <span class="sc">%in%</span> Especies) <span class="sc">%&gt;%</span></span>
<span id="cb2-14"><a href="#cb2-14"></a>  <span class="fu">group_by</span>(Especie) <span class="sc">%&gt;%</span></span>
<span id="cb2-15"><a href="#cb2-15"></a>  <span class="fu">summarise</span>(<span class="at">Num_Attacks =</span> <span class="fu">sum</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb2-16"><a href="#cb2-16"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb2-17"><a href="#cb2-17"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">cumsum</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb2-18"><a href="#cb2-18"></a>  <span class="fu">mutate</span>(<span class="at">Porcentaje =</span> <span class="fu">sprintf</span>( <span class="st">"%.1f"</span>, Num_Attacks <span class="sc">/</span> <span class="fu">sum</span>(Num_Attacks) <span class="sc">*</span> <span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb2-19"><a href="#cb2-19"></a>  <span class="fu">mutate</span>(<span class="at">Total_Porcentaje =</span> <span class="dv">1510</span><span class="sc">/</span><span class="dv">1510</span> <span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb2-20"><a href="#cb2-20"></a></span>
<span id="cb2-21"><a href="#cb2-21"></a></span>
<span id="cb2-22"><a href="#cb2-22"></a>barras1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Ataques_interes, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Especie, <span class="sc">-</span>Num_Attacks), <span class="at">y =</span> Num_Attacks, <span class="at">fill =</span> Especie)) <span class="sc">+</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb2-24"><a href="#cb2-24"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cantidad de ataques de tiburón por especie"</span>,</span>
<span id="cb2-25"><a href="#cb2-25"></a>       <span class="at">x =</span> <span class="st">"Especies de tiburón"</span>,</span>
<span id="cb2-26"><a href="#cb2-26"></a>       <span class="at">y =</span> <span class="st">"Cantidad de ataques"</span>) <span class="sc">+</span></span>
<span id="cb2-27"><a href="#cb2-27"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb2-28"><a href="#cb2-28"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb2-29"><a href="#cb2-29"></a></span>
<span id="cb2-30"><a href="#cb2-30"></a><span class="fu">ggplotly</span>(barras1)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-3724ac7a3a8f53d142d3" style="width:95%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-3724ac7a3a8f53d142d3">{"x":{"data":[{"orientation":"v","width":0.89999999999999858,"base":0,"x":[15],"y":[6],"text":"reorder(Especie, -Num_Attacks): Basking shark<br />Num_Attacks:   6<br />Especie: Basking shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(248,118,109,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Basking shark","legendgroup":"Basking shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[16],"y":[6],"text":"reorder(Especie, -Num_Attacks): Blacktip reef shark<br />Num_Attacks:   6<br />Especie: Blacktip reef shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(237,129,62,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Blacktip reef shark","legendgroup":"Blacktip reef shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999947,"base":0,"x":[8],"y":[45],"text":"reorder(Especie, -Num_Attacks): Blacktip shark<br />Num_Attacks:  45<br />Especie: Blacktip shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(222,140,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Blacktip shark","legendgroup":"Blacktip shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[11],"y":[27],"text":"reorder(Especie, -Num_Attacks): Blue shark<br />Num_Attacks:  27<br />Especie: Blue shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(205,150,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Blue shark","legendgroup":"Blue shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[5],"y":[54],"text":"reorder(Especie, -Num_Attacks): Bronze whaler shark<br />Num_Attacks:  54<br />Especie: Bronze whaler shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(183,159,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Bronze whaler shark","legendgroup":"Bronze whaler shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[4],"y":[134],"text":"reorder(Especie, -Num_Attacks): Bull shark<br />Num_Attacks: 134<br />Especie: Bull shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(157,167,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Bull shark","legendgroup":"Bull shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[17],"y":[5],"text":"reorder(Especie, -Num_Attacks): Carpet shark<br />Num_Attacks:   5<br />Especie: Carpet shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(124,174,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Carpet shark","legendgroup":"Carpet shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[20],"y":[4],"text":"reorder(Especie, -Num_Attacks): Cookiecutter shark<br />Num_Attacks:   4<br />Especie: Cookiecutter shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(73,181,0,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Cookiecutter shark","legendgroup":"Cookiecutter shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[23],"y":[2],"text":"reorder(Especie, -Num_Attacks): Copper shark<br />Num_Attacks:   2<br />Especie: Copper shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,186,56,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Copper shark","legendgroup":"Copper shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[18],"y":[5],"text":"reorder(Especie, -Num_Attacks): Galapagos shark<br />Num_Attacks:   5<br />Especie: Galapagos shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,190,103,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Galapagos shark","legendgroup":"Galapagos shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[13],"y":[15],"text":"reorder(Especie, -Num_Attacks): Grey reef shark<br />Num_Attacks:  15<br />Especie: Grey reef shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,192,139,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Grey reef shark","legendgroup":"Grey reef shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[9],"y":[44],"text":"reorder(Especie, -Num_Attacks): Mako shark<br />Num_Attacks:  44<br />Especie: Mako shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,193,169,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Mako shark","legendgroup":"Mako shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[6],"y":[53],"text":"reorder(Especie, -Num_Attacks): Nurse shark<br />Num_Attacks:  53<br />Especie: Nurse shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,191,196,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Nurse shark","legendgroup":"Nurse shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[21],"y":[4],"text":"reorder(Especie, -Num_Attacks): Porbeagle shark<br />Num_Attacks:   4<br />Especie: Porbeagle shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,187,220,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Porbeagle shark","legendgroup":"Porbeagle shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[10],"y":[43],"text":"reorder(Especie, -Num_Attacks): Raggedtooth shark<br />Num_Attacks:  43<br />Especie: Raggedtooth shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,180,240,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Raggedtooth shark","legendgroup":"Raggedtooth shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[19],"y":[5],"text":"reorder(Especie, -Num_Attacks): Reef shark<br />Num_Attacks:   5<br />Especie: Reef shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(0,169,255,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Reef shark","legendgroup":"Reef shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[12],"y":[17],"text":"reorder(Especie, -Num_Attacks): Sandtiger shark<br />Num_Attacks:  17<br />Especie: Sandtiger shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(97,156,255,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Sandtiger shark","legendgroup":"Sandtiger shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000013,"base":0,"x":[2],"y":[287],"text":"reorder(Especie, -Num_Attacks): shark<br />Num_Attacks: 287<br />Especie: shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(159,140,255,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"shark","legendgroup":"shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[14],"y":[15],"text":"reorder(Especie, -Num_Attacks): Spinner shark<br />Num_Attacks:  15<br />Especie: Spinner shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(199,124,255,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Spinner shark","legendgroup":"Spinner shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[3],"y":[235],"text":"reorder(Especie, -Num_Attacks): Tiger shark<br />Num_Attacks: 235<br />Especie: Tiger shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(227,110,246,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Tiger shark","legendgroup":"Tiger shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[24],"y":[2],"text":"reorder(Especie, -Num_Attacks): Whaler shark<br />Num_Attacks:   2<br />Especie: Whaler shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(245,100,227,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Whaler shark","legendgroup":"Whaler shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999991,"base":0,"x":[1],"y":[451],"text":"reorder(Especie, -Num_Attacks): White shark<br />Num_Attacks: 451<br />Especie: White shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,97,204,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"White shark","legendgroup":"White shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.89999999999999858,"base":0,"x":[22],"y":[3],"text":"reorder(Especie, -Num_Attacks): Whitetip reef shark<br />Num_Attacks:   3<br />Especie: Whitetip reef shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,100,176,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Whitetip reef shark","legendgroup":"Whitetip reef shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.90000000000000036,"base":0,"x":[7],"y":[48],"text":"reorder(Especie, -Num_Attacks): Wobbegong shark<br />Num_Attacks:  48<br />Especie: Wobbegong shark","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(255,108,145,1)","line":{"width":1.8897637795275593,"color":"rgba(0,0,0,1)"}},"name":"Wobbegong shark","legendgroup":"Wobbegong shark","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":87.152584500370139,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Cantidad de ataques de tiburón por especie","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,24.600000000000001],"tickmode":"array","ticktext":["White shark","shark","Tiger shark","Bull shark","Bronze whaler shark","Nurse shark","Wobbegong shark","Blacktip shark","Mako shark","Raggedtooth shark","Blue shark","Sandtiger shark","Grey reef shark","Spinner shark","Basking shark","Blacktip reef shark","Carpet shark","Galapagos shark","Reef shark","Cookiecutter shark","Porbeagle shark","Whitetip reef shark","Copper shark","Whaler shark"],"tickvals":[1,2.0000000000000004,3,3.9999999999999996,5,6,7.0000000000000009,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24],"categoryorder":"array","categoryarray":["White shark","shark","Tiger shark","Bull shark","Bronze whaler shark","Nurse shark","Wobbegong shark","Blacktip shark","Mako shark","Raggedtooth shark","Blue shark","Sandtiger shark","Grey reef shark","Spinner shark","Basking shark","Blacktip reef shark","Carpet shark","Galapagos shark","Reef shark","Cookiecutter shark","Porbeagle shark","Whitetip reef shark","Copper shark","Whaler shark"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-45,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Especies de tiburón","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-22.550000000000001,473.55000000000001],"tickmode":"array","ticktext":["0","100","200","300","400"],"tickvals":[0,100,200,300,400],"categoryorder":"array","categoryarray":["0","100","200","300","400"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"Cantidad de ataques","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Especie","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"4924f8339f7":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"4924f8339f7","visdat":{"4924f8339f7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<blockquote class="blockquote">
<h2 id="las-especies-con-más-ataques-registrados-son" class="anchored">Las especies con más ataques registrados son:</h2>
</blockquote>
<table class="table">
<thead>
<tr class="header">
<th>Especie</th>
<th>Nº Ataques</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Tiburón Blanco</td>
<td>451</td>
</tr>
<tr class="even">
<td>Tiburón sin identificar [^1]</td>
<td>287</td>
</tr>
<tr class="odd">
<td>Tiburón Tigre</td>
<td>235</td>
</tr>
<tr class="even">
<td>Tiburón Toro</td>
<td>134</td>
</tr>
</tbody>
</table>
<p>-En la gráfica, el término <strong>shark</strong> hace referencia a ataques de tiburón registrados cuya especie no se pudo identificar-</p>
<p>Estas 3 especies son las más conocidas por su gran tamaño y fuerza, es remarcable la agresividad en particular del tiburón toro (uno de los animales con niveles de testosterona más altos). No obstante, el que más ataques registrados tiene es el Gran Blanco, cuya mordida es de las más fuertes del reino animal, es un depredador con un olfato super desarrollado capaz de oler sangre a kilómetros de distancia y una visión remarcable (se creía que no podían ver a color, pero se ha demostrado lo contrario en recientes investigaciones). Esto último rompe el mito de que muchos ataques de esta especie hacia surfistas o buzos pueden deberse a que los confunden con presas habituales como focas, los investigadores se prestan más a teorías que atribuyen los ataques a otras razones como que el tiburón cree competir por una presa en concreto, también pueden ser actos de depredación por parte del animal. En cuanto al Tigre, se sabe que no tiene una dieta selectiva, por lo que se alimenta de prácticamente cualquier presa que encuentre (ya sean cangrejos, calamares, rayas, pequeños tiburones, tortugas…) por lo que esta especie aunque cuente con menos ataques, sí cuenta con mayor intención depredatoria que el resto.</p>
<p>Para ser concisos, la cantidad de ataques es realmente baja comparada con la población humana a lo largo de la historia, por lo que es muy improbable que un particular se vea envuelt@ en una situación de este estilo.</p>
</section>
<section id="las-actividades-más-propensas-a-sufrir-ataques." class="level1">
<h1>2: Las actividades más propensas a sufrir ataques.</h1>
<div class="cell" data-layout-align="center">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>Actividades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Fishing"</span>, <span class="st">"Swimming"</span>, <span class="st">"Diving"</span>, <span class="st">"Fell overboard"</span>, <span class="st">"Kite surfing"</span>, <span class="st">"Paddling"</span>,<span class="st">"Playing"</span>, <span class="st">"Rowing"</span>, <span class="st">"Scuba diving"</span>, <span class="st">"Sailing"</span>, <span class="st">"Sea Disaster"</span>, <span class="st">"Shark fishing"</span>, <span class="st">"Snorkeling"</span>, <span class="st">"Spearfishing"</span>, <span class="st">"Splashing"</span>, <span class="st">"Standing"</span>, <span class="st">"Suicide"</span>, <span class="st">"Surfing"</span>)</span>
<span id="cb3-2"><a href="#cb3-2"></a></span>
<span id="cb3-3"><a href="#cb3-3"></a>df_actividades <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="fu">group_by</span>(Activity) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="fu">summarise</span>(<span class="st">"Num_Attacks"</span> <span class="ot">=</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>  <span class="fu">filter</span> (Activity<span class="sc">%in%</span>Actividades) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Num_Attacks))</span>
<span id="cb3-8"><a href="#cb3-8"></a>  </span>
<span id="cb3-9"><a href="#cb3-9"></a>barras2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_actividades, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Activity, <span class="sc">-</span>Num_Attacks), <span class="at">y =</span> Num_Attacks, <span class="at">fill =</span> Activity)) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cantidad de ataques de tiburón por actividad"</span>,</span>
<span id="cb3-12"><a href="#cb3-12"></a>       <span class="at">x =</span> <span class="st">"Actividades"</span>,</span>
<span id="cb3-13"><a href="#cb3-13"></a>       <span class="at">y =</span> <span class="st">"Cantidad de ataques"</span>) <span class="sc">+</span></span>
<span id="cb3-14"><a href="#cb3-14"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb3-15"><a href="#cb3-15"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb3-16"><a href="#cb3-16"></a></span>
<span id="cb3-17"><a href="#cb3-17"></a>barras2</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<blockquote class="blockquote">
<h2 id="podemos-observar-que-las-actividades-con-más-ataques-registrados-son-las-siguientes" class="anchored" data-anchor-id="las-actividades-más-propensas-a-sufrir-ataques.">Podemos observar que las actividades con más ataques registrados son las siguientes:</h2>
</blockquote>
<table class="table">
<thead>
<tr class="header">
<th>Actividad</th>
<th>Nº Ataques</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Surf</td>
<td>1090</td>
</tr>
<tr class="even">
<td>Nado</td>
<td>958</td>
</tr>
<tr class="odd">
<td>Pesca</td>
<td>473</td>
</tr>
<tr class="even">
<td>Pesca con arpón</td>
<td>359</td>
</tr>
</tbody>
</table>
<p>Todas tienen en común elementos que atraen a los tiburones; En el surf y en el nado tienen lugar una alta cantidad de salpicadas en el agua por parte de quienes realizan dicha actividad, esto activa el instinto depredador de los tiburones haciéndoles creer que hay potenciales presas en dichas áreas. En cuanto a la pesca es bastante obvio, primero el tipo de cebo que se use (ya que en función de lo que se pretenda pescar se usará uno concreto) y después aquello que se esté pescando atraerá al tiburón ya que es una presa fácil (téngase en cuenta que la sangre tanto del cebo como de la pesca en sí es detectada por los tiburones a una larga distancia). La pesca con arpón es aún más riesgosa ya que el propio buzo debe recoger la presa con sus manos y se expone directamente al tiburón.</p>
<p>En resumidas cuentas, las actividades más propensas a sufrir ataques son aquellas que estimulan el instinto del tiburón.</p>
</section>
<section id="mapamundi-de-ataques-en-2022-zonas-con-más-registros." class="level1">
<h1>3: Mapamundi de ataques en 2022, zonas con más registros.</h1>
<div class="cell" data-layout-align="center">
<details>
<summary>Código</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">library</span>(<span class="st">"stringr"</span>)</span>
<span id="cb4-2"><a href="#cb4-2"></a><span class="fu">library</span>(<span class="st">"rnaturalearth"</span>)</span>
<span id="cb4-3"><a href="#cb4-3"></a><span class="fu">library</span>(<span class="st">"rnaturalearthdata"</span>)</span>
<span id="cb4-4"><a href="#cb4-4"></a></span>
<span id="cb4-5"><a href="#cb4-5"></a>DF_MAPA <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6"></a>  <span class="fu">select</span>(Year, Country) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb4-9"><a href="#cb4-9"></a>  <span class="fu">summarise</span>(<span class="at">Num_Attacks =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-10"><a href="#cb4-10"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-11"><a href="#cb4-11"></a>           Country <span class="sc">==</span> <span class="st">"USA"</span> <span class="sc">~</span> <span class="st">"United States"</span>,</span>
<span id="cb4-12"><a href="#cb4-12"></a>           <span class="cn">TRUE</span> <span class="sc">~</span> Country  <span class="co"># Mantener los demás países sin cambios</span></span>
<span id="cb4-13"><a href="#cb4-13"></a>         )) <span class="sc">%&gt;%</span></span>
<span id="cb4-14"><a href="#cb4-14"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">str_to_title</span>(Country))</span>
<span id="cb4-15"><a href="#cb4-15"></a>  </span>
<span id="cb4-16"><a href="#cb4-16"></a>world <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb4-17"><a href="#cb4-17"></a></span>
<span id="cb4-18"><a href="#cb4-18"></a></span>
<span id="cb4-19"><a href="#cb4-19"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">filter</span>(subregion <span class="sc">!=</span> <span class="st">"Antarctica"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(admin <span class="sc">!=</span> <span class="st">"Greenland"</span>)</span>
<span id="cb4-20"><a href="#cb4-20"></a></span>
<span id="cb4-21"><a href="#cb4-21"></a></span>
<span id="cb4-22"><a href="#cb4-22"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, iso_a3, geometry) </span>
<span id="cb4-23"><a href="#cb4-23"></a></span>
<span id="cb4-24"><a href="#cb4-24"></a></span>
<span id="cb4-25"><a href="#cb4-25"></a>df_world <span class="ot">&lt;-</span> <span class="fu">full_join</span>(DF_MAPA, world, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Country"</span> <span class="ot">=</span> <span class="st">"name"</span>) ) </span>
<span id="cb4-26"><a href="#cb4-26"></a></span>
<span id="cb4-27"><a href="#cb4-27"></a>p10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_world) <span class="sc">+</span></span>
<span id="cb4-28"><a href="#cb4-28"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Num_Attacks, <span class="at">geometry =</span> geometry), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb4-29"><a href="#cb4-29"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"D"</span>, <span class="at">trans =</span> <span class="st">"log"</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">scale =</span> <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># Sin decimales en la leyenda</span></span>
<span id="cb4-30"><a href="#cb4-30"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb4-31"><a href="#cb4-31"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Número de Ataques de Tiburón por País en 2022"</span>,</span>
<span id="cb4-32"><a href="#cb4-32"></a>       <span class="at">fill =</span> <span class="st">"Número de ataques"</span>) <span class="sc">+</span></span>
<span id="cb4-33"><a href="#cb4-33"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>()</span>
<span id="cb4-34"><a href="#cb4-34"></a></span>
<span id="cb4-35"><a href="#cb4-35"></a>p10</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="my_trabajo_BigData_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:95.0%"></p>
</figure>
</div>
</div>
</div>
<p>-Que conste que en Alaska no hubo ataques, si no que se hace referencia a todo EEUU como país-</p>
</section>
<section id="conclusión" class="level1">
<h1>4: CONCLUSIÓN</h1>
<p>Los tiburones son un animal salvaje que no representa un peligro para el ser humano ya que no formamos parte de su dieta habitual y por tanto no nos detecta como una presa. Sin embargo, debemos ser precavidos y mantener la calma en aquellas situaciones en las que nos encontremos con estos ya que al ser grandes depredadores pueden causarnos daños muy graves, al ser salvajes su comportamiento puede ser impredecible. Debemos apreciar su belleza y defenderlos ya que son un importante componente del ecosistema marino.</p>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Ejecutar el código</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb5" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">---</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="an">title:</span><span class="co"> "Ataques de tiburón a lo largo de la historia."</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="an">author:</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">  - name: Juan Bosco Pujol</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">    affiliation: Universitat de València</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">    affiliation-url: https://www.uv.es</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="an">date:</span><span class="co"> 2024-01-03                           #--</span></span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="an">categories:</span><span class="co"> [trabajo BigData, selección natural]   #--</span></span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="an">image:</span><span class="co"> "./imagenes/imagen_01.png"</span></span>
<span id="cb5-10"><a href="#cb5-10"></a><span class="an">title-block-banner:</span><span class="co"> true #- {true, false, "green","#AA0000"} </span></span>
<span id="cb5-11"><a href="#cb5-11"></a><span class="an">toc-depth:</span><span class="co"> 3</span></span>
<span id="cb5-12"><a href="#cb5-12"></a><span class="an">smooth-scroll:</span><span class="co"> true</span></span>
<span id="cb5-13"><a href="#cb5-13"></a><span class="an">format:</span><span class="co"> </span></span>
<span id="cb5-14"><a href="#cb5-14"></a><span class="co">  html:</span></span>
<span id="cb5-15"><a href="#cb5-15"></a><span class="co">    link-external-newwindow: true</span></span>
<span id="cb5-16"><a href="#cb5-16"></a><span class="co">    css: ./assets/my_css_file.css  </span></span>
<span id="cb5-17"><a href="#cb5-17"></a><span class="co">    toc: true #- CUIDADO!!!!</span></span>
<span id="cb5-18"><a href="#cb5-18"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb5-19"><a href="#cb5-19"></a><span class="an">code-link:</span><span class="co"> true</span></span>
<span id="cb5-20"><a href="#cb5-20"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb5-21"><a href="#cb5-21"></a><span class="co">---</span></span>
<span id="cb5-22"><a href="#cb5-22"></a></span>
<span id="cb5-23"><a href="#cb5-23"></a><span class="fu"># Introducción</span></span>
<span id="cb5-24"><a href="#cb5-24"></a></span>
<span id="cb5-25"><a href="#cb5-25"></a>El tiburón es un animal fascinante, un depredador perfeccionado a través de millones de años de evolución (es más antiguo que los árboles) que tenemos la suerte de poder observar y analizar en nuestros tiempos. Sin embargo, en la mayoría de personas sienten miedo y rechazo hacia este. Si bien es cierto que estos animales pueden ser peligrosos debido a su fuerza de mordida y afilados dientes, no representan una amenaza real para nosotros los humanos. La cruda realidad es bien opuesta, pues es el ser humano la real amenaza para el tiburón.</span>
<span id="cb5-26"><a href="#cb5-26"></a></span>
<span id="cb5-27"><a href="#cb5-27"></a>Procederé a exponer una serie de datos que he obtenido de un archivo mejorado del archivo global de ataques de tiburón elaborado por el <span class="co">[</span><span class="ot">*Shark Research Institute*</span><span class="co">](https://www.sharkattackfile.net/index.htm)</span></span>
<span id="cb5-28"><a href="#cb5-28"></a></span>
<span id="cb5-29"><a href="#cb5-29"></a><span class="fu"># 1: Recuento de ataques de tiburones a humanos.</span></span>
<span id="cb5-30"><a href="#cb5-30"></a></span>
<span id="cb5-31"><a href="#cb5-31"></a><span class="at">&gt; ## En primer lugar, vamos a observar la cantidad de ataques de tiburón que se han registrado en el archivo global:</span></span>
<span id="cb5-32"><a href="#cb5-32"></a></span>
<span id="cb5-35"><a href="#cb5-35"></a><span class="in">```{r}</span></span>
<span id="cb5-36"><a href="#cb5-36"></a><span class="fu">library</span>(plotly)</span>
<span id="cb5-37"><a href="#cb5-37"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb5-38"><a href="#cb5-38"></a><span class="fu">library</span>(gganimate)</span>
<span id="cb5-39"><a href="#cb5-39"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb5-40"><a href="#cb5-40"></a></span>
<span id="cb5-41"><a href="#cb5-41"></a><span class="co">#CARGADO DE DATOS</span></span>
<span id="cb5-42"><a href="#cb5-42"></a></span>
<span id="cb5-43"><a href="#cb5-43"></a>datos <span class="ot">&lt;-</span> <span class="st">"./datos/sharkie.csv"</span></span>
<span id="cb5-44"><a href="#cb5-44"></a></span>
<span id="cb5-45"><a href="#cb5-45"></a>sharks <span class="ot">&lt;-</span>rio<span class="sc">::</span><span class="fu">import</span>(datos)</span>
<span id="cb5-46"><a href="#cb5-46"></a></span>
<span id="cb5-47"><a href="#cb5-47"></a><span class="co">#me ventilo los NA</span></span>
<span id="cb5-48"><a href="#cb5-48"></a></span>
<span id="cb5-49"><a href="#cb5-49"></a>sharks_limpio <span class="ot">&lt;-</span> sharks<span class="sc">%&gt;%</span> <span class="fu">drop_na</span>()</span>
<span id="cb5-50"><a href="#cb5-50"></a></span>
<span id="cb5-51"><a href="#cb5-51"></a><span class="co">#Voy a seleccionar las variables que me interesan para realizar el trabajo, generando el DF general que usaré:</span></span>
<span id="cb5-52"><a href="#cb5-52"></a></span>
<span id="cb5-53"><a href="#cb5-53"></a>DF_TIBURONE <span class="ot">&lt;-</span> sharks_limpio <span class="sc">%&gt;%</span></span>
<span id="cb5-54"><a href="#cb5-54"></a>  <span class="fu">select</span>(Year, Type, Country, Activity, Sex, Age,<span class="st">`</span><span class="at">Fatal (Y/N)</span><span class="st">`</span>, Species)</span>
<span id="cb5-55"><a href="#cb5-55"></a></span>
<span id="cb5-56"><a href="#cb5-56"></a><span class="co">#GRAFICO CON NUMERO DE ATAQUES TOTAL POR AÑO</span></span>
<span id="cb5-57"><a href="#cb5-57"></a></span>
<span id="cb5-58"><a href="#cb5-58"></a>Ataques_por_año <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb5-59"><a href="#cb5-59"></a>  <span class="fu">group_by</span>(Year) <span class="sc">%&gt;%</span></span>
<span id="cb5-60"><a href="#cb5-60"></a>  <span class="fu">summarize</span>(<span class="at">Num_Attacks =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb5-61"><a href="#cb5-61"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> <span class="fu">sum</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb5-62"><a href="#cb5-62"></a>  <span class="fu">mutate</span>(<span class="at">Total_acumulado =</span> <span class="fu">cumsum</span>(Num_Attacks))</span>
<span id="cb5-63"><a href="#cb5-63"></a></span>
<span id="cb5-64"><a href="#cb5-64"></a>G1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Ataques_por_año,</span>
<span id="cb5-65"><a href="#cb5-65"></a>       <span class="fu">aes</span>(</span>
<span id="cb5-66"><a href="#cb5-66"></a>         Year, </span>
<span id="cb5-67"><a href="#cb5-67"></a>         Num_Attacks)) <span class="sc">+</span></span>
<span id="cb5-68"><a href="#cb5-68"></a>       <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.90</span>,</span>
<span id="cb5-69"><a href="#cb5-69"></a>                 <span class="at">color =</span> <span class="st">"#BD1D00"</span>) <span class="sc">+</span></span>
<span id="cb5-70"><a href="#cb5-70"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-71"><a href="#cb5-71"></a>    <span class="at">title =</span> <span class="st">"Número de ataques de tiburón por año."</span>,</span>
<span id="cb5-72"><a href="#cb5-72"></a>    <span class="at">subtitle =</span> <span class="st">"Serie 1555-2022"</span>,</span>
<span id="cb5-73"><a href="#cb5-73"></a>    <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb5-74"><a href="#cb5-74"></a>    <span class="at">y =</span> <span class="st">"Número de ataques"</span></span>
<span id="cb5-75"><a href="#cb5-75"></a>  ) <span class="sc">+</span></span>
<span id="cb5-76"><a href="#cb5-76"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span> </span>
<span id="cb5-77"><a href="#cb5-77"></a>  <span class="fu">transition_reveal</span>(Year) <span class="sc">+</span></span>
<span id="cb5-78"><a href="#cb5-78"></a>  <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-79"><a href="#cb5-79"></a></span>
<span id="cb5-80"><a href="#cb5-80"></a><span class="fu">animate</span>(G1, <span class="at">nframes =</span> <span class="dv">244</span>, <span class="at">fps =</span> <span class="dv">20</span>)</span>
<span id="cb5-81"><a href="#cb5-81"></a></span>
<span id="cb5-82"><a href="#cb5-82"></a>G2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Ataques_por_año, </span>
<span id="cb5-83"><a href="#cb5-83"></a>             <span class="fu">aes</span>(</span>
<span id="cb5-84"><a href="#cb5-84"></a>               Year,</span>
<span id="cb5-85"><a href="#cb5-85"></a>               Total_acumulado)) <span class="sc">+</span></span>
<span id="cb5-86"><a href="#cb5-86"></a>  <span class="fu">geom_line</span>(<span class="at">size =</span> <span class="fl">0.9</span>,</span>
<span id="cb5-87"><a href="#cb5-87"></a>            <span class="at">color =</span> <span class="st">"#BD1D00"</span> ) <span class="sc">+</span></span>
<span id="cb5-88"><a href="#cb5-88"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-89"><a href="#cb5-89"></a>    <span class="at">title =</span> <span class="st">"Total de ataques de tiburón"</span>,</span>
<span id="cb5-90"><a href="#cb5-90"></a>    <span class="at">subtitle =</span> <span class="st">"Serie acumulada 1555-2022"</span>,</span>
<span id="cb5-91"><a href="#cb5-91"></a>    <span class="at">x =</span> <span class="st">"Año"</span>,</span>
<span id="cb5-92"><a href="#cb5-92"></a>    <span class="at">y =</span> <span class="st">"Número de ataques"</span></span>
<span id="cb5-93"><a href="#cb5-93"></a>  ) <span class="sc">+</span> </span>
<span id="cb5-94"><a href="#cb5-94"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>() <span class="sc">+</span></span>
<span id="cb5-95"><a href="#cb5-95"></a>  <span class="fu">transition_reveal</span>(Year) <span class="sc">+</span></span>
<span id="cb5-96"><a href="#cb5-96"></a>  <span class="fu">view_follow</span>(<span class="at">fixed_y =</span> <span class="cn">TRUE</span>)</span>
<span id="cb5-97"><a href="#cb5-97"></a></span>
<span id="cb5-98"><a href="#cb5-98"></a><span class="fu">animate</span>(G2, <span class="at">nframes =</span> <span class="dv">244</span>, <span class="at">fps =</span> <span class="dv">20</span>)</span>
<span id="cb5-99"><a href="#cb5-99"></a></span>
<span id="cb5-100"><a href="#cb5-100"></a></span>
<span id="cb5-101"><a href="#cb5-101"></a><span class="in">```</span></span>
<span id="cb5-102"><a href="#cb5-102"></a></span>
<span id="cb5-103"><a href="#cb5-103"></a>A simple vista podemos ver que la cantidad de ataques tanto acumulada como por año ha ido en aumento a lo largo de la historia. Esto no es de sorpresa para nadie ya que se ha producido un constante aumento de la población humana y con ella un aumento respecto al número de actividades que se realizan en el mar (pesca, ocio, viajes en barco...) por lo que es lógico que los ataques de tiburón hayan aumentado. Sin embargo, las cantidades de ataques registrados son ridículamente pequeñas teniendo en cuenta la enorme cantidad de seres humanos que habitamos el planeta. Es más, existen otras especies animales que se cobran una mayor cantidad de vidas humanas que los tiburones:</span>
<span id="cb5-104"><a href="#cb5-104"></a></span>
<span id="cb5-105"><a href="#cb5-105"></a>| Animal                  | Kills por año     |</span>
<span id="cb5-106"><a href="#cb5-106"></a>|-------------------------|-------------------|</span>
<span id="cb5-107"><a href="#cb5-107"></a>| Mosquitos               | 750000            |</span>
<span id="cb5-108"><a href="#cb5-108"></a>| Serpientes              | 100000            |</span>
<span id="cb5-109"><a href="#cb5-109"></a>| Perros                  | Entre 25 y 35 mil    |</span>
<span id="cb5-110"><a href="#cb5-110"></a>| Caracoles de agua dulce | Entre 10 y 20 mil |</span>
<span id="cb5-111"><a href="#cb5-111"></a></span>
<span id="cb5-112"><a href="#cb5-112"></a>Veamos qué especies de tiburón son las que más ataques a personas tienen registrados según nuestros datos:</span>
<span id="cb5-113"><a href="#cb5-113"></a></span>
<span id="cb5-116"><a href="#cb5-116"></a><span class="in">```{r}</span></span>
<span id="cb5-117"><a href="#cb5-117"></a>Especies <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"White shark"</span>, <span class="st">"Grey reef shark"</span>, <span class="st">"Tiger shark"</span>, <span class="st">"Wobbegong shark"</span>, <span class="st">"Blacktip shark"</span>, <span class="st">"Sandtiger shark"</span>, <span class="st">"Reef shark"</span>, <span class="st">"Bull shark"</span>, <span class="st">"Blacktip reef shark"</span>, <span class="st">"Whitetip reef shark"</span>, <span class="st">"Lemon shark"</span>, <span class="st">"Porbeagle shark"</span>, <span class="st">"Nurse shark"</span>, <span class="st">"Bronze whaler shark"</span>, <span class="st">"Raggedtooth shark"</span>, <span class="st">"Mako shark"</span>, <span class="st">"Hammerhead shark"</span>, <span class="st">"Whaler shark"</span>, <span class="st">"Copper shark"</span>, <span class="st">"Galapagos shark"</span>, <span class="st">"Cookiecutter shark"</span>, <span class="st">"Broadnose sevengil shark"</span>, <span class="st">"Spinner shark"</span>, <span class="st">"Blue shark"</span>, <span class="st">"Carpet shark"</span>, <span class="st">"Basking shark"</span>, <span class="st">"Salmon shark"</span>, <span class="st">"Zambesi shark"</span>,<span class="st">"shark"</span>)</span>
<span id="cb5-118"><a href="#cb5-118"></a></span>
<span id="cb5-119"><a href="#cb5-119"></a>Ataques_por_especie <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb5-120"><a href="#cb5-120"></a>  <span class="fu">group_by</span>(Species) <span class="sc">%&gt;%</span></span>
<span id="cb5-121"><a href="#cb5-121"></a>  <span class="fu">summarize</span>(<span class="at">Num_Attacks =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb5-122"><a href="#cb5-122"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">sum</span>(Num_Attacks),</span>
<span id="cb5-123"><a href="#cb5-123"></a>         <span class="at">Especie =</span> <span class="fu">gsub</span>(<span class="st">"^</span><span class="sc">\\</span><span class="st">+?[</span><span class="sc">\\</span><span class="st">.+0-9]+'?[ ]?|[</span><span class="sc">\\</span><span class="st">.+0-9]+[ ]?(m|cm)[ ]?to [</span><span class="sc">\\</span><span class="st">.+0-9]+[ ]?(m|cm)[ ]?</span><span class="sc">\\</span><span class="st">[([</span><span class="sc">\\</span><span class="st">.+0-9]+)'? to ([</span><span class="sc">\\</span><span class="st">.+0-9]+)'?</span><span class="sc">\\</span><span class="st">][ ]?|[ ]?metre|[</span><span class="sc">\\</span><span class="st">[</span><span class="sc">\\</span><span class="st">]][ ]?|</span><span class="sc">\\</span><span class="st">d+[ ]?[-–][ ]?</span><span class="sc">\\</span><span class="st">[?</span><span class="sc">\\</span><span class="st">d+[ ]?(kg|lb)</span><span class="sc">\\</span><span class="st">]?[ ]?dead|,.*|[ ]?metre|[ ]?(m|cm)|</span><span class="sc">\\</span><span class="st">[.*</span><span class="sc">\\</span><span class="st">]|[;].*"</span>, <span class="st">""</span>, Species))</span>
<span id="cb5-124"><a href="#cb5-124"></a></span>
<span id="cb5-125"><a href="#cb5-125"></a></span>
<span id="cb5-126"><a href="#cb5-126"></a>Ataques_interes <span class="ot">&lt;-</span> Ataques_por_especie <span class="sc">%&gt;%</span></span>
<span id="cb5-127"><a href="#cb5-127"></a>  <span class="fu">select</span>(Especie, Num_Attacks, Total) <span class="sc">%&gt;%</span></span>
<span id="cb5-128"><a href="#cb5-128"></a>  <span class="fu">filter</span>(Especie <span class="sc">%in%</span> Especies) <span class="sc">%&gt;%</span></span>
<span id="cb5-129"><a href="#cb5-129"></a>  <span class="fu">group_by</span>(Especie) <span class="sc">%&gt;%</span></span>
<span id="cb5-130"><a href="#cb5-130"></a>  <span class="fu">summarise</span>(<span class="at">Num_Attacks =</span> <span class="fu">sum</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb5-131"><a href="#cb5-131"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb5-132"><a href="#cb5-132"></a>  <span class="fu">mutate</span>(<span class="at">Total =</span> <span class="fu">cumsum</span>(Num_Attacks)) <span class="sc">%&gt;%</span></span>
<span id="cb5-133"><a href="#cb5-133"></a>  <span class="fu">mutate</span>(<span class="at">Porcentaje =</span> <span class="fu">sprintf</span>( <span class="st">"%.1f"</span>, Num_Attacks <span class="sc">/</span> <span class="fu">sum</span>(Num_Attacks) <span class="sc">*</span> <span class="dv">100</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb5-134"><a href="#cb5-134"></a>  <span class="fu">mutate</span>(<span class="at">Total_Porcentaje =</span> <span class="dv">1510</span><span class="sc">/</span><span class="dv">1510</span> <span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb5-135"><a href="#cb5-135"></a></span>
<span id="cb5-136"><a href="#cb5-136"></a></span>
<span id="cb5-137"><a href="#cb5-137"></a>barras1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(Ataques_interes, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Especie, <span class="sc">-</span>Num_Attacks), <span class="at">y =</span> Num_Attacks, <span class="at">fill =</span> Especie)) <span class="sc">+</span></span>
<span id="cb5-138"><a href="#cb5-138"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb5-139"><a href="#cb5-139"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cantidad de ataques de tiburón por especie"</span>,</span>
<span id="cb5-140"><a href="#cb5-140"></a>       <span class="at">x =</span> <span class="st">"Especies de tiburón"</span>,</span>
<span id="cb5-141"><a href="#cb5-141"></a>       <span class="at">y =</span> <span class="st">"Cantidad de ataques"</span>) <span class="sc">+</span></span>
<span id="cb5-142"><a href="#cb5-142"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-143"><a href="#cb5-143"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb5-144"><a href="#cb5-144"></a></span>
<span id="cb5-145"><a href="#cb5-145"></a><span class="fu">ggplotly</span>(barras1)</span>
<span id="cb5-146"><a href="#cb5-146"></a></span>
<span id="cb5-147"><a href="#cb5-147"></a><span class="in">```</span></span>
<span id="cb5-148"><a href="#cb5-148"></a></span>
<span id="cb5-149"><a href="#cb5-149"></a></span>
<span id="cb5-150"><a href="#cb5-150"></a><span class="at">&gt; ## Las especies con más ataques registrados son:</span></span>
<span id="cb5-151"><a href="#cb5-151"></a></span>
<span id="cb5-152"><a href="#cb5-152"></a>| Especie | Nº Ataques |</span>
<span id="cb5-153"><a href="#cb5-153"></a>|---------|------------|</span>
<span id="cb5-154"><a href="#cb5-154"></a>|Tiburón Blanco| 451 |</span>
<span id="cb5-155"><a href="#cb5-155"></a>|Tiburón sin identificar <span class="ot">[^1]</span>| 287 |</span>
<span id="cb5-156"><a href="#cb5-156"></a>|Tiburón Tigre| 235 |</span>
<span id="cb5-157"><a href="#cb5-157"></a>|Tiburón Toro| 134 |</span>
<span id="cb5-158"><a href="#cb5-158"></a></span>
<span id="cb5-159"><a href="#cb5-159"></a>-En la gráfica, el término **shark** hace referencia a ataques de tiburón registrados cuya especie no se pudo identificar-</span>
<span id="cb5-160"><a href="#cb5-160"></a></span>
<span id="cb5-161"><a href="#cb5-161"></a>Estas 3 especies son las más conocidas por su gran tamaño y fuerza, es remarcable la agresividad en particular del tiburón toro (uno de los animales con niveles de testosterona más altos). </span>
<span id="cb5-162"><a href="#cb5-162"></a>No obstante, el que más ataques registrados tiene es el Gran Blanco, cuya mordida es de las más fuertes del reino animal, es un depredador con un olfato super desarrollado capaz de oler sangre a kilómetros de distancia y una visión remarcable (se creía que no podían ver a color, pero se ha demostrado lo contrario en recientes investigaciones). Esto último rompe el mito de que muchos ataques de esta especie hacia surfistas o buzos pueden deberse a que los confunden con presas habituales como focas, los investigadores se prestan más a teorías que atribuyen los ataques a otras razones como que el tiburón cree competir por una presa en concreto, también pueden ser actos de depredación por parte del animal.</span>
<span id="cb5-163"><a href="#cb5-163"></a>En cuanto al Tigre, se sabe que no tiene una dieta selectiva, por lo que se alimenta de prácticamente cualquier presa que encuentre (ya sean cangrejos, calamares, rayas, pequeños tiburones, tortugas...) por lo que esta especie aunque cuente con menos ataques, sí cuenta con mayor intención depredatoria que el resto.</span>
<span id="cb5-164"><a href="#cb5-164"></a></span>
<span id="cb5-165"><a href="#cb5-165"></a>Para ser concisos, la cantidad de ataques es realmente baja comparada con la población humana a lo largo de la historia, por lo que es muy improbable que un particular se vea envuelt@ en una situación de este estilo.</span>
<span id="cb5-166"><a href="#cb5-166"></a></span>
<span id="cb5-167"><a href="#cb5-167"></a><span class="fu"># 2: Las actividades más propensas a sufrir ataques. </span></span>
<span id="cb5-168"><a href="#cb5-168"></a></span>
<span id="cb5-171"><a href="#cb5-171"></a><span class="in">```{r}</span></span>
<span id="cb5-172"><a href="#cb5-172"></a>Actividades <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Fishing"</span>, <span class="st">"Swimming"</span>, <span class="st">"Diving"</span>, <span class="st">"Fell overboard"</span>, <span class="st">"Kite surfing"</span>, <span class="st">"Paddling"</span>,<span class="st">"Playing"</span>, <span class="st">"Rowing"</span>, <span class="st">"Scuba diving"</span>, <span class="st">"Sailing"</span>, <span class="st">"Sea Disaster"</span>, <span class="st">"Shark fishing"</span>, <span class="st">"Snorkeling"</span>, <span class="st">"Spearfishing"</span>, <span class="st">"Splashing"</span>, <span class="st">"Standing"</span>, <span class="st">"Suicide"</span>, <span class="st">"Surfing"</span>)</span>
<span id="cb5-173"><a href="#cb5-173"></a></span>
<span id="cb5-174"><a href="#cb5-174"></a>df_actividades <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb5-175"><a href="#cb5-175"></a>  <span class="fu">group_by</span>(Activity) <span class="sc">%&gt;%</span></span>
<span id="cb5-176"><a href="#cb5-176"></a>  <span class="fu">summarise</span>(<span class="st">"Num_Attacks"</span> <span class="ot">=</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb5-177"><a href="#cb5-177"></a>  <span class="fu">filter</span> (Activity<span class="sc">%in%</span>Actividades) <span class="sc">%&gt;%</span></span>
<span id="cb5-178"><a href="#cb5-178"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Num_Attacks))</span>
<span id="cb5-179"><a href="#cb5-179"></a>  </span>
<span id="cb5-180"><a href="#cb5-180"></a>barras2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_actividades, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(Activity, <span class="sc">-</span>Num_Attacks), <span class="at">y =</span> Num_Attacks, <span class="at">fill =</span> Activity)) <span class="sc">+</span></span>
<span id="cb5-181"><a href="#cb5-181"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb5-182"><a href="#cb5-182"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cantidad de ataques de tiburón por actividad"</span>,</span>
<span id="cb5-183"><a href="#cb5-183"></a>       <span class="at">x =</span> <span class="st">"Actividades"</span>,</span>
<span id="cb5-184"><a href="#cb5-184"></a>       <span class="at">y =</span> <span class="st">"Cantidad de ataques"</span>) <span class="sc">+</span></span>
<span id="cb5-185"><a href="#cb5-185"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb5-186"><a href="#cb5-186"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb5-187"><a href="#cb5-187"></a></span>
<span id="cb5-188"><a href="#cb5-188"></a>barras2</span>
<span id="cb5-189"><a href="#cb5-189"></a></span>
<span id="cb5-190"><a href="#cb5-190"></a><span class="in">```</span></span>
<span id="cb5-191"><a href="#cb5-191"></a></span>
<span id="cb5-192"><a href="#cb5-192"></a><span class="at">&gt; ## Podemos observar que las actividades con más ataques registrados son las siguientes:</span></span>
<span id="cb5-193"><a href="#cb5-193"></a></span>
<span id="cb5-194"><a href="#cb5-194"></a>| Actividad | Nº Ataques |</span>
<span id="cb5-195"><a href="#cb5-195"></a>|---------|------------|</span>
<span id="cb5-196"><a href="#cb5-196"></a>| Surf | 1090 |</span>
<span id="cb5-197"><a href="#cb5-197"></a>| Nado | 958 |</span>
<span id="cb5-198"><a href="#cb5-198"></a>| Pesca| 473 |</span>
<span id="cb5-199"><a href="#cb5-199"></a>| Pesca con arpón| 359 |</span>
<span id="cb5-200"><a href="#cb5-200"></a></span>
<span id="cb5-201"><a href="#cb5-201"></a>Todas tienen en común elementos que atraen a los tiburones;</span>
<span id="cb5-202"><a href="#cb5-202"></a>En el surf y en el nado tienen lugar una alta cantidad de salpicadas en el agua por parte de quienes realizan dicha actividad, esto activa el instinto depredador de los tiburones haciéndoles creer que hay potenciales presas en dichas áreas.</span>
<span id="cb5-203"><a href="#cb5-203"></a>En cuanto a la pesca es bastante obvio, primero el tipo de cebo que se use (ya que en función de lo que se pretenda pescar se usará uno concreto) y después aquello que se esté pescando atraerá al tiburón ya que es una presa fácil (téngase en cuenta que la sangre tanto del cebo como de la pesca en sí es detectada por los tiburones a una larga distancia). La pesca con arpón es aún más riesgosa ya que el propio buzo debe recoger la presa con sus manos y se expone directamente al tiburón.</span>
<span id="cb5-204"><a href="#cb5-204"></a></span>
<span id="cb5-205"><a href="#cb5-205"></a>En resumidas cuentas, las actividades más propensas a sufrir ataques son aquellas que estimulan el instinto del tiburón.</span>
<span id="cb5-206"><a href="#cb5-206"></a></span>
<span id="cb5-207"><a href="#cb5-207"></a><span class="fu"># 3: Mapamundi de ataques en 2022, zonas con más registros.</span></span>
<span id="cb5-208"><a href="#cb5-208"></a></span>
<span id="cb5-211"><a href="#cb5-211"></a><span class="in">```{r}</span></span>
<span id="cb5-212"><a href="#cb5-212"></a><span class="fu">library</span>(<span class="st">"stringr"</span>)</span>
<span id="cb5-213"><a href="#cb5-213"></a><span class="fu">library</span>(<span class="st">"rnaturalearth"</span>)</span>
<span id="cb5-214"><a href="#cb5-214"></a><span class="fu">library</span>(<span class="st">"rnaturalearthdata"</span>)</span>
<span id="cb5-215"><a href="#cb5-215"></a></span>
<span id="cb5-216"><a href="#cb5-216"></a>DF_MAPA <span class="ot">&lt;-</span> DF_TIBURONE <span class="sc">%&gt;%</span></span>
<span id="cb5-217"><a href="#cb5-217"></a>  <span class="fu">select</span>(Year, Country) <span class="sc">%&gt;%</span></span>
<span id="cb5-218"><a href="#cb5-218"></a>  <span class="fu">filter</span>(Year <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-219"><a href="#cb5-219"></a>  <span class="fu">group_by</span>(Country) <span class="sc">%&gt;%</span></span>
<span id="cb5-220"><a href="#cb5-220"></a>  <span class="fu">summarise</span>(<span class="at">Num_Attacks =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb5-221"><a href="#cb5-221"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-222"><a href="#cb5-222"></a>           Country <span class="sc">==</span> <span class="st">"USA"</span> <span class="sc">~</span> <span class="st">"United States"</span>,</span>
<span id="cb5-223"><a href="#cb5-223"></a>           <span class="cn">TRUE</span> <span class="sc">~</span> Country  <span class="co"># Mantener los demás países sin cambios</span></span>
<span id="cb5-224"><a href="#cb5-224"></a>         )) <span class="sc">%&gt;%</span></span>
<span id="cb5-225"><a href="#cb5-225"></a>  <span class="fu">mutate</span>(<span class="at">Country =</span> <span class="fu">str_to_title</span>(Country))</span>
<span id="cb5-226"><a href="#cb5-226"></a>  </span>
<span id="cb5-227"><a href="#cb5-227"></a>world <span class="ot">&lt;-</span> rnaturalearth<span class="sc">::</span><span class="fu">ne_countries</span>(<span class="at">scale =</span> <span class="st">"medium"</span>, <span class="at">returnclass =</span> <span class="st">"sf"</span>)</span>
<span id="cb5-228"><a href="#cb5-228"></a></span>
<span id="cb5-229"><a href="#cb5-229"></a></span>
<span id="cb5-230"><a href="#cb5-230"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">filter</span>(subregion <span class="sc">!=</span> <span class="st">"Antarctica"</span>) <span class="sc">%&gt;%</span> <span class="fu">filter</span>(admin <span class="sc">!=</span> <span class="st">"Greenland"</span>)</span>
<span id="cb5-231"><a href="#cb5-231"></a></span>
<span id="cb5-232"><a href="#cb5-232"></a></span>
<span id="cb5-233"><a href="#cb5-233"></a>world <span class="ot">&lt;-</span> world <span class="sc">%&gt;%</span> <span class="fu">select</span>(name, iso_a3, geometry) </span>
<span id="cb5-234"><a href="#cb5-234"></a></span>
<span id="cb5-235"><a href="#cb5-235"></a></span>
<span id="cb5-236"><a href="#cb5-236"></a>df_world <span class="ot">&lt;-</span> <span class="fu">full_join</span>(DF_MAPA, world, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"Country"</span> <span class="ot">=</span> <span class="st">"name"</span>) ) </span>
<span id="cb5-237"><a href="#cb5-237"></a></span>
<span id="cb5-238"><a href="#cb5-238"></a>p10 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(df_world) <span class="sc">+</span></span>
<span id="cb5-239"><a href="#cb5-239"></a>  <span class="fu">geom_sf</span>(<span class="fu">aes</span>(<span class="at">fill =</span> Num_Attacks, <span class="at">geometry =</span> geometry), <span class="at">color =</span> <span class="st">"white"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb5-240"><a href="#cb5-240"></a>  <span class="fu">scale_fill_viridis_c</span>(<span class="at">option =</span> <span class="st">"D"</span>, <span class="at">trans =</span> <span class="st">"log"</span>, <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(<span class="at">scale =</span> <span class="dv">1</span>)) <span class="sc">+</span>  <span class="co"># Sin decimales en la leyenda</span></span>
<span id="cb5-241"><a href="#cb5-241"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span></span>
<span id="cb5-242"><a href="#cb5-242"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Número de Ataques de Tiburón por País en 2022"</span>,</span>
<span id="cb5-243"><a href="#cb5-243"></a>       <span class="at">fill =</span> <span class="st">"Número de ataques"</span>) <span class="sc">+</span></span>
<span id="cb5-244"><a href="#cb5-244"></a>  ggthemes<span class="sc">::</span><span class="fu">theme_stata</span>()</span>
<span id="cb5-245"><a href="#cb5-245"></a></span>
<span id="cb5-246"><a href="#cb5-246"></a>p10</span>
<span id="cb5-247"><a href="#cb5-247"></a></span>
<span id="cb5-248"><a href="#cb5-248"></a><span class="in">```</span></span>
<span id="cb5-249"><a href="#cb5-249"></a>-Que conste que en Alaska no hubo ataques, si no que se hace referencia a todo EEUU como país-</span>
<span id="cb5-250"><a href="#cb5-250"></a></span>
<span id="cb5-251"><a href="#cb5-251"></a><span class="fu"># 4: CONCLUSIÓN</span></span>
<span id="cb5-252"><a href="#cb5-252"></a></span>
<span id="cb5-253"><a href="#cb5-253"></a>Los tiburones son un animal salvaje que no representa un peligro para el ser humano ya que no formamos parte de su dieta habitual y por tanto no nos detecta como una presa. Sin embargo, debemos ser precavidos y mantener la calma en aquellas situaciones en las que nos encontremos con estos ya que al ser grandes depredadores pueden causarnos daños muy graves, al ser salvajes su comportamiento puede ser impredecible. Debemos apreciar su belleza y defenderlos ya que son un importante componente del ecosistema marino.</span>
</code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© 2024 Boskarro</div>   
    <div class="nav-footer-center">Hecho por un tiburón que sabe usar <a href="https://quarto.org">Quarto</a>.</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/<tu-usuario-github>">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="mailto:pucer@alumni.uv.es">
      <i class="bi bi-envelope" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>